<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Golf Weather at the K Club</title>
  <style>
    body {
      background-color: #2e8b57; /* green fairway color */
      color: #fff;
      font-family: 'Segoe UI', sans-serif;
      text-align: center;
      padding: 40px;
    }

    h1 {
      font-size: 2em;
      margin-bottom: 10px;
    }

    input, button {
      font-size: 1rem;
      padding: 10px 15px;
      margin: 10px;
      border-radius: 8px;
      border: none;
    }

    input[type="date"] {
      background-color: #fff;
      color: #000;
    }

    button {
      background-color: #006400;
      color: white;
      cursor: pointer;
    }

    .result {
      margin-top: 30px;
      background-color: #3cb371;
      padding: 20px;
      border-radius: 10px;
      display: inline-block;
    }

    .score {
      font-size: 1.5em;
      font-weight: bold;
      margin-top: 10px;
    }

    .label {
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>How was the golfing at the K Club the day you were born?</h1>
  <p>Enter your birthday:</p>
  <input type="date" id="birthday" max="2024-12-31" />
  <br />
  <button onclick="checkGolfWeather()">Check Weather</button>

  <div class="result" id="result"></div>

  <script>
    async function checkGolfWeather() {
      const birthday = document.getElementById("birthday").value;
      const resultDiv = document.getElementById("result");

      if (!birthday) {
        resultDiv.innerHTML = "Please enter your birthday.";
        return;
      }

      const latitude = 53.305;
      const longitude = -6.625;
      const url = `https://archive-api.open-meteo.com/v1/archive?latitude=${latitude}&longitude=${longitude}&start_date=${birthday}&end_date=${birthday}&hourly=temperature_2m,precipitation,windspeed_10m&timezone=Europe%2FDublin`;

      try {
        const response = await fetch(url);
        const data = await response.json();

        const times = data.hourly.time;
        const temps = data.hourly.temperature_2m;
        const rains = data.hourly.precipitation;
        const winds = data.hourly.windspeed_10m;

        // Find the 12:00 reading
        const noonIndex = times.findIndex(t => t.includes("12:00"));
        if (noonIndex === -1) {
          resultDiv.innerHTML = "No noon weather data available for that date.";
          return;
        }

        const temp = temps[noonIndex];
        const rain = rains[noonIndex];
        const wind = winds[noonIndex];

        const tempPenalty = Math.min(Math.abs(temp - 21) * 1.1, 20);
        const rainPenalty = Math.min(rain * 5, 50);
        const windPenalty = Math.min(Math.abs(wind - 5), 30);
        const golfScore = 100 - (tempPenalty + rainPenalty + windPenalty);

        resultDiv.innerHTML = `
          <div class="label">ğŸ“ K Club at Noon on ${birthday}</div><br>
          ğŸŒ¡ï¸ Temperature: ${temp.toFixed(1)} Â°C <br>
          ğŸŒ§ï¸ Rainfall: ${rain.toFixed(1)} mm <br>
          ğŸ’¨ Wind Speed: ${wind.toFixed(1)} km/h <br><br>

          <div class="label">Scoring Penalties:</div>
          ğŸŸ  Temp Penalty: ${tempPenalty.toFixed(1)} pts<br>
          ğŸ”µ Rain Penalty: ${rainPenalty.toFixed(1)} pts<br>
          ğŸŸ£ Wind Penalty: ${windPenalty.toFixed(1)} pts<br><br>

          <div class="score">ğŸŒï¸ Golf Score: ${golfScore.toFixed(1)} / 100</div>
        `;
      } catch (error) {
        console.error(error);
        resultDiv.innerHTML = "Something went wrong. Try a different date.";
      }
    }
  </script>
</body>
</html>
